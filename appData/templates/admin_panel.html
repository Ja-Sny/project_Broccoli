{% extends "layout.html" %}
{% block content %}
<div class="container">
    <main>
        <div class="row justify-content-center">
            <div class="col-sm-12">
                <h1 class="fw-light">
                    Witaj Adminie
                </h1>
                <hr class="my-4">
            </div>
        </div>
        <div class="row justify-content-center">
            <div class="col-md-4 list-group list-group-checkable">
                <span class="text-primary">Zarządzaj ogłoszeniami</span>
                <hr class="my-4">
                {% for post in posts %}
                <a href="/post/{{ post.id }}" class="list-group-item list-group-item-action d-flex gap-3 py-3" aria-current="true">
                    <div class="d-flex gap-2 w-100 justify-content-between">
                      <div>
                        <h6 class="mb-0">{{ post.manufacture }} {{ post.model }}</h6>
                        <span class="d-block small opacity-50">Dodano: {{ post.date_posted.replace(microsecond=0) }}</span>
                        <span class="d-block small opacity-50">Cena: {{ post.price }}</span>
                        <p class="mb-0 opacity-75">
                            Dodano przez: {{ post.author.login }}
                        </p>
                      </div>
                      <small class="opacity-50 text-nowrap">Publiczne</small>
                    </div>
                </a>
                <div class="mt-1 d-flex justify-content-center">
                  <button class="btn btn-outline-primary me-2">Edytuj</button>
                  <button class="btn btn-danger me-2">Usuń</button>
                  <button class="btn btn-outline-danger me-2">Zablokuj</button>
                  <button class="btn btn-outline-success me-2">Odblokuj</button>
                  <!-- TODO if not public -->
                  <button class="btn btn-outline-warning me-2">Opublikuj</button>
                </div>
                <hr class="my-4">
                {% endfor %}
            </div>
            <div class="col-md-4 list-group list-group-checkable">
                <span class="text-primary">Zarządzaj użytkownikami</span>
                <hr class="my-4">
                {% for user in users %}
                <a href="/user/{{ user.id }}" class="list-group-item list-group-item-action d-flex gap-3 py-3" aria-current="true">
                    <div class="d-flex gap-2 w-100 justify-content-between">
                      <div>
                        <h6 class="mb-0">{{ user.login }}</h6>
                        {% if user.firstname %}
                        <span class="d-block small opacity-50">{{ user.firstnaem }} {{ user.lastname }}</span>
                        {% else %}
                        <span class="d-block small opacity-50">N/A</span>
                        {% endif %}
                        <span class="d-block small opacity-50">Email: {{ user.email }}</span>
                      </div>
                      <small class="opacity-50 text-nowrap">{{ user.role }}</small>
                    </div>
                </a>
                <div class="mt-1 d-flex justify-content-center">
                    <button class="btn btn-outline-warning me-2">Zresetuj hasło</button>
                    {% if user.role == 'Unverified' %}
                    <button class="btn btn-outline-warning me-2">Weryfikuj</button>
                    {% endif %}
                    <button class="btn btn-outline-primary me-2">Edytuj</button>
                    {% if user.role == 'Blocked' %}
                    <button class="btn btn-outline-success me-2">Odblokuj</button>
                    {% else %}
                    <button class="btn btn-outline-danger me-2">Zablokuj</button>
                    {% endif %}
                    <button class="btn btn-danger me-2">Usuń</button>
                </div>
                <hr class="my-4">
                {% endfor %}
            </div>
            <div class="col-md-4 list-group list-group-checkable">
                <span class="text-primary">Zarządzaj portalem</span>
                <hr class="my-4">
                <div class="list-group-item py-3" for="listGroupCheckableRadios1">
                Posty
                <span class="d-block small opacity-50">Posty utworzone dzisiaj: {{ statistics.sumOfPostsToday }}</span>
                <span class="d-block small opacity-50">Łączna ilość postów: {{ statistics.sumOfPosts }}</span>
                </div>
                <div class="list-group-item py-3" for="listGroupCheckableRadios1">
                    Użytkownicy
                    <span class="d-block small opacity-50">Ilość zarejestrowanych użytkowników: {{ statistics.sumOfUsers }}</span>
                </div>
                <div class="list-group-item py-3" for="listGroupCheckableRadios1">
                    Aplikacja
                    <span class="d-block small opacity-50"><a href='https://github.com/Ja-Sny/project_Broccoli'>Build: {{ statistics.buildNumber }}</a></span>
                </div>
            </div>
        </div>
    </main>
</div>
{% endblock content %}